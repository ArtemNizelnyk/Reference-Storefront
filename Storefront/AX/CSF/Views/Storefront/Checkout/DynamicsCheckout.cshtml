@*//-----------------------------------------------------------------------
// Copyright 2016 Sitecore Corporation A/S
// Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file
// except in compliance with the License. You may obtain a copy of the License at
//       http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software distributed under the
// License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
// either express or implied. See the License for the specific language governing permissions
// and limitations under the License.
// -------------------------------------------------------------------------------------------*@

@using Microsoft.Dynamics.Retail.Ecommerce.Sdk.Controls
@using Sitecore.Globalization
@using Sitecore.Reference.Storefront
@using Sitecore.Reference.Storefront.Managers

@{
    Layout = null;
    var confirmPageUrl = StorefrontManager.StorefrontUri("checkout/OrderConfirmation");
    var cartButtonContinueLabel = @Html.Sitecore().Field("Cart Button Continue", Html.Sitecore().CurrentItem);
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Checkout</title>

    @Scripts.Render("~/styles/checkout")
    
    @Html.CheckoutControlHeader(confirmPageUrl, false, false)
</head>
<body>
    <input type="hidden" value="@StorefrontManager.CurrentStorefront.InnerItem[DynamicsStorefrontConstants.KnownFieldNames.ChannelId]" id="channelid" />
    <a class="msax-PaddingRight5" href="@StorefrontManager.StorefrontHome">@cartButtonContinueLabel</a>

    <script type="text/javascript">
        var channelId = $("#channelid").val();
        $(document).ready(function (e) {
            $.ajaxSetup({
                global: true,
                beforeSend: function (xhr) {
                    xhr.setRequestHeader('channelid', channelId);
                }
            });
        })
    </script>
   
    @Html.CheckoutControl(false)
</body>
</html>